!async function () { let e = e => new Promise(t => setTimeout(t, e)), t = []; async function n() { let e = document.querySelectorAll(".order-item"), n = document.querySelectorAll(".shop-right-status"); e.forEach((e, i) => { let r = e.querySelector(".item-title")?.innerText.trim(), l = e.querySelector(".item-price.text.bold")?.innerText.trim(), a = e.querySelector(".item-quantity")?.innerText.trim(), o = n[i]?.innerText.trim() || "Unknown"; if (r && l) { let c = parseFloat(l.replace(/[^0-9.]/g, "")), s = parseInt(a.replace(/[^0-9]/g, "")) || 1; t.push({ title: r, quantity: s, total: c * s, status: o }) } }) } async function i() { let e = document.querySelector(".next-pagination-item.current + .next-pagination-item"); return !!e && !e.classList.contains("disabled") && (e.click(), !0) } async function r() { let r = 1; for (; ;) { console.log(`üìÑ Scraping Page ${r}...`), await e(3e3), await n(); let l = await i(); if (!l) break; r++ } !function e() { let n = document.getElementById("mylazadatotal") || (() => { let e = document.createElement("div"); return e.id = "mylazadatotal", e.style.background = "white", e.style.color = "black", e.style.padding = "20px", e.style.margin = "10px", document.body.insertBefore(e, document.body.firstChild), e })(); n.innerHTML = ""; let i = document.createElement("h2"); i.innerText = "\uD83D\uDCE6 BGR | LazadaPH Order Audit", i.style.marginBottom = "20px", n.appendChild(i); let r = 0, l = {}; t.forEach(({ title: e, quantity: t, total: i, status: a }) => { let o = a.charAt(0).toUpperCase() + a.slice(1).toLowerCase(); r += i, l[o] || (l[o] = 0), l[o] += i; let c = document.createElement("p"); c.innerText = `[ ‚Ç±${i.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ] ‚Äî ${e} (${t}) [${o}]`, n.appendChild(c) }); let a = document.createElement("p"); a.innerText = `üí∞ Grand Total: ‚Ç±${r.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`, a.style.marginTop = "20px", a.style.fontWeight = "bold", a.style.fontSize = "16px", n.appendChild(a); let o = document.createElement("h3"); o.innerText = "\uD83D\uDCCC Subtotals by Order Status:", o.style.marginTop = "15px", n.appendChild(o), Object.entries(l).forEach(([e, t]) => { let i = document.createElement("p"); i.innerText = `‚Ä¢ ${e}: ‚Ç±${t.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`, n.appendChild(i) }); let c = document.createElement("p"); c.innerText = "\uD83E\uDDE0 Compiled by BeeGeeAr | ‚òï Fueled by caffeine & \uD83D\uDECDÔ∏è shopping regrets \uD83D\uDE02.", c.style.marginTop = "25px", c.style.fontStyle = "italic", c.style.color = "#666", n.appendChild(c); let s = document.createElement("p"); s.innerHTML = `üîó Inspired by the original <a href="https://github.com/limkokhole/MyLazadaTotal" target="_blank" style="color: #0077cc; text-decoration: none;">MyLazadaTotal</a> by @limkokhole on GitHub.`, s.style.marginTop = "5px", s.style.fontSize = "12px", s.style.color = "#999", n.appendChild(s); let d = document.createElement("button"); d.innerText = "‚¨áÔ∏è Download CSV", d.style.marginTop = "15px", d.style.padding = "10px", d.style.background = "#0077cc", d.style.color = "white", d.style.border = "none", d.style.cursor = "pointer", d.style.borderRadius = "5px", d.onclick = () => (function e(t) { let n = [["Title", "Quantity", "Total", "Status"]]; t.forEach(({ title: e, quantity: t, total: i, status: r }) => { n.push([`"${e}"`, t, i.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 }), `"${r}"`]) }); let i = n.map(e => e.join(",")).join("\n"), r = new Blob([i], { type: "text/csv" }), l = URL.createObjectURL(r), a = document.createElement("a"); a.href = l, a.download = `BGR_LazadaPH_OrderAudit_${new Date().toISOString().slice(0, 10)}.csv`, a.click(), URL.revokeObjectURL(l) })(t), n.appendChild(d) }() } await r() }(); function extractOrderDetailsFromDetailPage() { let e = {}; document.querySelectorAll(".text.desc").forEach(t => { let n = t.textContent.trim(); n.startsWith("Placed on") ? e.placedOn = n.replace("Placed on", "").trim() : n.startsWith("Paid on") ? e.paidOn = n.replace("Paid on", "").trim() : n.startsWith("Delivered on") ? e.deliveredOn = n.replace("Delivered on", "").trim() : n.startsWith("Completed on") && (e.completedOn = n.replace("Completed on", "").trim()) }); let t = document.querySelector(".order-number"); t && (e.orderNumber = t.textContent.replace("Order", "").trim()); let n = document.querySelector(".payment-line"); n && (e.paidBy = n.textContent.trim()), document.querySelectorAll(".total-summary .row").forEach(t => { let n = t.querySelector(".text")?.textContent.trim(), i = t.querySelector(".price")?.textContent.replace(/[^0-9.]/g, "").trim(); n && i && (n.includes("Subtotal") ? e.subtotal = parseFloat(i) : n.includes("Shipping Fee") ? e.shippingFee = parseFloat(i) : n.includes("Lazada Voucher") ? e.lazadaVoucher = parseFloat(i) : n.includes("Free Shipping") ? e.freeShippingVoucher = parseFloat(i) : n.includes("Instant Discount") ? e.instantDiscount = parseFloat(i) : n.includes("Coins") && (e.coins = parseFloat(i))) }); let i = document.querySelector(".total-summary .text.bold + .text.bold"); return i && (e.totalAmount = parseFloat(i.textContent.replace(/[^0-9.]/g, "").trim())), e }