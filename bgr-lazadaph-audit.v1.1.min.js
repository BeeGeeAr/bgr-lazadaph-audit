//https://www.toptal.com/developers/javascript-minifier
!async function () { let e = e => new Promise(t => setTimeout(t, e)), t = []; async function i() { let e = document.querySelectorAll(".order-item"), i = document.querySelectorAll(".shop-right-status"); e.forEach((e, n) => { let a = e.querySelector(".item-title")?.innerText.trim(), l = e.querySelector(".item-price.text.bold")?.innerText.trim(), r = e.querySelector(".item-quantity")?.innerText.trim(), o = i[n]?.innerText.trim() || "Unknown"; if (a && l) { let c = parseFloat(l.replace(/[^0-9.]/g, "")), s = parseInt(r.replace(/[^0-9]/g, "")) || 1; t.push({ title: a, quantity: s, total: c * s, status: o }) } }) } async function n() { let e = document.querySelector(".next-pagination-item.current + .next-pagination-item"); return !!e && !e.classList.contains("disabled") && (e.click(), !0) } async function a() { let a = 1; for (; ;) { console.log(`üìÑ Scraping Page ${a}...`), await e(3e3), await i(); let l = await n(); if (!l) break; a++ } !function e() { let i = document.getElementById("mylazadatotal") || (() => { let e = document.createElement("div"); return e.id = "mylazadatotal", e.style.background = "white", e.style.color = "black", e.style.padding = "20px", e.style.margin = "10px", document.body.insertBefore(e, document.body.firstChild), e })(); i.innerHTML = ""; let n = document.createElement("h2"); n.innerText = "\uD83D\uDCE6 BGR | LazadaPH Order Audit", n.style.marginBottom = "20px", i.appendChild(n); let a = 0, l = {}; t.forEach(({ title: e, quantity: t, total: n, status: r }) => { let o = r.charAt(0).toUpperCase() + r.slice(1).toLowerCase(); a += n, l[o] || (l[o] = 0), l[o] += n; let c = document.createElement("p"); c.innerText = `[ ‚Ç±${n.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ] ‚Äî ${e} (${t}) [${o}]`, i.appendChild(c) }); let r = document.createElement("p"); r.innerText = `üí∞ Grand Total: ‚Ç±${a.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`, r.style.marginTop = "20px", r.style.fontWeight = "bold", r.style.fontSize = "16px", i.appendChild(r); let o = document.createElement("h3"); o.innerText = "\uD83D\uDCCC Subtotals by Order Status:", o.style.marginTop = "15px", i.appendChild(o), Object.entries(l).forEach(([e, t]) => { let n = document.createElement("p"); n.innerText = `‚Ä¢ ${e}: ‚Ç±${t.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`, i.appendChild(n) }); let c = document.createElement("p"); c.innerText = "\uD83E\uDDE0 Compiled by BeeGeeAr | ‚òï Fueled by caffeine & \uD83D\uDECDÔ∏è shopping regrets \uD83D\uDE02.", c.style.marginTop = "25px", c.style.fontStyle = "italic", c.style.color = "#666", i.appendChild(c); let s = document.createElement("p"); s.innerHTML = `üîó Inspired by the original <a href="https://github.com/limkokhole/MyLazadaTotal" target="_blank" style="color: #0077cc; text-decoration: none;">MyLazadaTotal</a> by @limkokhole on GitHub.`, s.style.marginTop = "5px", s.style.fontSize = "12px", s.style.color = "#999", i.appendChild(s); let m = document.createElement("button"); m.innerText = "‚¨áÔ∏è Download CSV", m.style.marginTop = "15px", m.style.padding = "10px", m.style.background = "#0077cc", m.style.color = "white", m.style.border = "none", m.style.cursor = "pointer", m.style.borderRadius = "5px", m.onclick = () => (function e(t) { let i = [["Title", "Quantity", "Total", "Status"]]; t.forEach(({ title: e, quantity: t, total: n, status: a }) => { i.push([`"${e}"`, t, n.toLocaleString("en-PH", { minimumFractionDigits: 2, maximumFractionDigits: 2 }), `"${a}"`]) }); let n = i.map(e => e.join(",")).join("\n"), a = new Blob([n], { type: "text/csv" }), l = URL.createObjectURL(a), r = document.createElement("a"); r.href = l, r.download = `BGR_LazadaPH_OrderAudit_${new Date().toISOString().slice(0, 10)}.csv`, r.click(), URL.revokeObjectURL(l) })(t), i.appendChild(m) }() } await a() }();